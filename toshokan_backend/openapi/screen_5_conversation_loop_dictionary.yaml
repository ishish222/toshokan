paths:
  /v1/tools/dictionary:lookup:
    post:
      tags: [Tools]
      summary: Dictionary lookup (EN->JA or JA->EN) for the right-panel word lookup
      operationId: dictionaryLookup
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DictionaryLookupRequest"
      responses:
        "200":
          description: Lookup results.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DictionaryLookupResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "422":
          $ref: "#/components/responses/UnprocessableEntity"
        "429":
          $ref: "#/components/responses/RateLimited"
        "500":
          $ref: "#/components/responses/ServerError"

components:
  schemas:
    DictionaryDirection:
      type: string
      enum: [en_to_ja, ja_to_en]

    DictionaryLookupRequest:
      type: object
      required: [query, direction]
      additionalProperties: false
      properties:
        query:
          type: string
          minLength: 1
          maxLength: 200
        direction:
          $ref: "#/components/schemas/DictionaryDirection"
        limit:
          type: integer
          minimum: 1
          maximum: 20
          default: 5

    DictionaryResult:
      type: object
      required: [ja, en]
      additionalProperties: false
      properties:
        ja:
          type: string
        reading:
          type: string
          description: Kana reading (optional).
        en:
          type: string
        tags:
          type: array
          items:
            type: string

    DictionaryLookupResponse:
      type: object
      required: [query, direction, results]
      additionalProperties: false
      properties:
        query:
          type: string
        direction:
          $ref: "#/components/schemas/DictionaryDirection"
        results:
          type: array
          items:
            $ref: "#/components/schemas/DictionaryResult"
