# --- OpenAPI 3.1 additions for Screen 1: Identity (with external auth provider) ---

paths:
  /v1/me:
    get:
      tags: [Identity]
      summary: Get current authenticated user profile
      operationId: getMe
      responses:
        "200":
          description: Current user profile.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Me"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "500":
          $ref: "#/components/responses/ServerError"

components:
  schemas:
    Me:
      type: object
      required: [user_id, email, created_at]
      additionalProperties: false
      properties:
        user_id:
          type: string
        email:
          type: string
          format: email
        display_name:
          type: string
          maxLength: 80
        created_at:
          $ref: "#/components/schemas/ISODateTime"
        onboarding:
          type: object
          additionalProperties: false
          properties:
            goals_configured:
              type: boolean
              default: false
        defaults:
          type: object
          additionalProperties: false
          properties:
            hiragana_hint_enabled:
              type: boolean
              default: false
